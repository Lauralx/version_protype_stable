{"ast":null,"code":"import { moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../kanban.app.component\";\nimport * as i2 from \"../service/kanban.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/cdk/drag-drop\";\nimport * as i6 from \"primeng/button\";\nimport * as i7 from \"primeng/ripple\";\nimport * as i8 from \"primeng/inputtext\";\nimport * as i9 from \"primeng/api\";\nimport * as i10 from \"primeng/menu\";\nimport * as i11 from \"primeng/tooltip\";\nimport * as i12 from \"primeng/inplace\";\nimport * as i13 from \"../kanban-card/kanban-card.component\";\nconst _c0 = [\"inputEl\"];\nconst _c1 = [\"listEl\"];\nfunction KanbanListComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.list.title);\n  }\n}\nfunction KanbanListComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 15, 16);\n    i0.ɵɵlistener(\"ngModelChange\", function KanbanListComponent_ng_template_5_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.list.title = $event);\n    })(\"keydown.enter\", function KanbanListComponent_ng_template_5_Template_input_keydown_enter_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      i0.ɵɵnextContext();\n      const _r0 = i0.ɵɵreference(3);\n      return i0.ɵɵresetView(_r0.deactivate());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"value\", ctx_r2.list.title)(\"ngModel\", ctx_r2.list.title);\n  }\n}\nfunction KanbanListComponent_app_kanban_card_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-kanban-card\", 17);\n    i0.ɵɵlistener(\"click\", function KanbanListComponent_app_kanban_card_12_Template_app_kanban_card_click_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const card_r10 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onCardClick($event, card_r10));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const card_r10 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"card\", card_r10)(\"listId\", ctx_r5.list.listId)(\"cdkDragDisabled\", ctx_r5.isMobileDevice);\n  }\n}\nexport class KanbanListComponent {\n  constructor(parent, kanbanService) {\n    this.parent = parent;\n    this.kanbanService = kanbanService;\n    this.menuItems = [];\n    this.title = '';\n    this.timeout = null;\n    this.isMobileDevice = false;\n  }\n  ngOnInit() {\n    this.isMobileDevice = this.kanbanService.isMobileDevice();\n    this.menuItems = [{\n      label: 'List actions',\n      items: [{\n        separator: true\n      }, {\n        label: 'Copy list',\n        command: () => this.onCopy(this.list)\n      }, {\n        label: 'Remove list',\n        command: () => {\n          if (this.list.listId) {\n            this.onDelete(this.list.listId);\n          }\n        }\n      }]\n    }];\n  }\n  toggleSidebar() {\n    this.parent.sidebarVisible = true;\n  }\n  onDelete(id) {\n    this.kanbanService.deleteList(id);\n  }\n  onCopy(list) {\n    this.kanbanService.copyList(list);\n  }\n  onCardClick(event, card) {\n    const eventTarget = event.target;\n    if (!(eventTarget.classList.contains('p-button-icon') || eventTarget.classList.contains('p-trigger'))) {\n      if (this.list.listId) {\n        this.kanbanService.onCardSelect(card, this.list.listId);\n      }\n      this.parent.sidebarVisible = true;\n    }\n  }\n  insertCard() {\n    if (this.list.listId) {\n      this.kanbanService.addCard(this.list.listId);\n    }\n  }\n  dropCard(event) {\n    if (event.previousContainer === event.container) {\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\n    } else {\n      transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex);\n    }\n  }\n  focus() {\n    this.timeout = setTimeout(() => this.inputEl.nativeElement.focus(), 1);\n  }\n  insertHeight(event) {\n    event.container.element.nativeElement.style.minHeight = '10rem';\n  }\n  removeHeight(event) {\n    event.container.element.nativeElement.style.minHeight = '2rem';\n  }\n}\nKanbanListComponent.ɵfac = function KanbanListComponent_Factory(t) {\n  return new (t || KanbanListComponent)(i0.ɵɵdirectiveInject(i1.KanbanAppComponent), i0.ɵɵdirectiveInject(i2.KanbanService));\n};\nKanbanListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: KanbanListComponent,\n  selectors: [[\"app-kanban-list\"]],\n  viewQuery: function KanbanListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.inputEl = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.listEl = _t.first);\n    }\n  },\n  inputs: {\n    list: \"list\",\n    listIds: \"listIds\"\n  },\n  decls: 15,\n  vars: 7,\n  consts: [[1, \"surface-card\", \"flex\", \"flex-column\", \"md:w-25rem\", \"border-1\", \"surface-border\", \"overflow-hidden\", \"border-round\"], [1, \"flex\", \"justify-content-between\", \"align-items-center\", \"w-full\", \"px-4\", \"mt-4\", \"h-3rem\"], [\"closeIcon\", \"pi pi-check\", \"styleClass\", \"h-auto\", 3, \"closable\", \"onActivate\"], [\"inplace\", \"\"], [\"pTemplate\", \"display\"], [\"pTemplate\", \"content\"], [\"pButton\", \"\", \"pRipple\", \"\", \"type\", \"button\", \"icon\", \"pi pi-ellipsis-h\", 1, \"p-button-rounded\", \"p-button-text\", \"p-button-secondary\", 3, \"click\"], [3, \"model\", \"popup\"], [\"menu\", \"\"], [\"cdkDropList\", \"\", 1, \"flex\", \"flex-column\", \"gap-5\", \"overflow-y-auto\", \"px-4\", \"mt-4\", \"scrollable\", \"kanban-list\", 2, \"min-height\", \"2rem\", 3, \"id\", \"cdkDropListData\", \"cdkDropListConnectedTo\", \"cdkDropListDropped\", \"cdkDropListEntered\", \"cdkDropListExited\"], [\"listEl\", \"\"], [\"cdkDrag\", \"\", \"cdkDragHandle\", \"\", 3, \"card\", \"listId\", \"cdkDragDisabled\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"px-4\", \"mb-3\", \"w-full\", \"mt-4\", \"flex\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"New Card\", \"icon\", \"pi pi-plus font-semibold\", 1, \"py-3\", \"justify-content-center\", \"font-semibold\", \"w-full\", \"border-round\", 3, \"click\"], [\"pTooltip\", \"Click to edit\", \"tooltipPosition\", \"top\", 1, \"block\", \"text-900\", \"font-semibold\", \"mt-4\", \"pl-2\", \"text-lg\", 2, \"word-break\", \"break-word\"], [\"type\", \"text\", \"pInputText\", \"\", 1, \"w-10rem\", \"sm:w-15rem\", \"h-3rem\", \"text-900\", \"text-lg\", 3, \"value\", \"ngModel\", \"ngModelChange\", \"keydown.enter\"], [\"inputEl\", \"\"], [\"cdkDrag\", \"\", \"cdkDragHandle\", \"\", 3, \"card\", \"listId\", \"cdkDragDisabled\", \"click\"]],\n  template: function KanbanListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r13 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"p-inplace\", 2, 3);\n      i0.ɵɵlistener(\"onActivate\", function KanbanListComponent_Template_p_inplace_onActivate_2_listener() {\n        return ctx.focus();\n      });\n      i0.ɵɵtemplate(4, KanbanListComponent_ng_template_4_Template, 2, 1, \"ng-template\", 4);\n      i0.ɵɵtemplate(5, KanbanListComponent_ng_template_5_Template, 2, 2, \"ng-template\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\")(7, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function KanbanListComponent_Template_button_click_7_listener($event) {\n        i0.ɵɵrestoreView(_r13);\n        const _r3 = i0.ɵɵreference(9);\n        return i0.ɵɵresetView(_r3.toggle($event));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"p-menu\", 7, 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 9, 10);\n      i0.ɵɵlistener(\"cdkDropListDropped\", function KanbanListComponent_Template_div_cdkDropListDropped_10_listener($event) {\n        return ctx.dropCard($event);\n      })(\"cdkDropListEntered\", function KanbanListComponent_Template_div_cdkDropListEntered_10_listener($event) {\n        return ctx.insertHeight($event);\n      })(\"cdkDropListExited\", function KanbanListComponent_Template_div_cdkDropListExited_10_listener($event) {\n        return ctx.removeHeight($event);\n      });\n      i0.ɵɵtemplate(12, KanbanListComponent_app_kanban_card_12_Template, 1, 3, \"app-kanban-card\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 12)(14, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function KanbanListComponent_Template_button_click_14_listener() {\n        return ctx.insertCard();\n      });\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"closable\", true);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"model\", ctx.menuItems)(\"popup\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"id\", ctx.list.listId)(\"cdkDropListData\", ctx.list.cards)(\"cdkDropListConnectedTo\", ctx.listIds);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.list.cards);\n    }\n  },\n  dependencies: [i3.NgForOf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.CdkDropList, i5.CdkDrag, i5.CdkDragHandle, i6.ButtonDirective, i7.Ripple, i8.InputText, i9.PrimeTemplate, i10.Menu, i11.Tooltip, i12.Inplace, i13.KanbanCardComponent],\n  styles: [\"[_nghost-%COMP%]     .p-button-label {\\n  flex: 0;\\n  white-space: nowrap;\\n}\\n[_nghost-%COMP%]     .scrollable {\\n  scroll-behavior: smooth;\\n  max-height: 70vh;\\n}\\n\\n[_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar {\\n  width: 6px;\\n}\\n[_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track {\\n  background: transparent;\\n}\\n[_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\\n  background-color: var(--gray-500);\\n  border-radius: 20px;\\n}\\n\\n.cdk-drag-preview[_ngcontent-%COMP%] {\\n  box-sizing: border-box;\\n  border-radius: 4px;\\n  box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);\\n}\\n\\n.cdk-drag-placeholder[_ngcontent-%COMP%] {\\n  opacity: 0.25;\\n}\\n\\n.cdk-drag-animating[_ngcontent-%COMP%] {\\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZGVtby9jb21wb25lbnRzL2FwcHMva2FuYmFuL2thbmJhbi1saXN0L2thbmJhbi1saXN0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNJO0VBQ0ksT0FBQTtFQUNBLG1CQUFBO0FBQVI7QUFHSTtFQUNJLHVCQUFBO0VBQ0EsZ0JBQUE7QUFEUjs7QUFNSTtFQUNJLFVBQUE7QUFIUjtBQU1JO0VBQ0ksdUJBQUE7QUFKUjtBQU9JO0VBQ0ksaUNBQUE7RUFDQSxtQkFBQTtBQUxSOztBQVNBO0VBQ0ksc0JBQUE7RUFDQSxrQkFBQTtFQUNBLHFIQUFBO0FBTko7O0FBV0E7RUFDSSxhQUFBO0FBUko7O0FBV0E7RUFDSSxzREFBQTtBQVJKIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3QgOjpuZy1kZWVwIHtcbiAgICAucC1idXR0b24tbGFiZWwge1xuICAgICAgICBmbGV4OiAwO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIH1cblxuICAgIC5zY3JvbGxhYmxlIHtcbiAgICAgICAgc2Nyb2xsLWJlaGF2aW9yOiBzbW9vdGg7XG4gICAgICAgIG1heC1oZWlnaHQ6IDcwdmg7XG4gICAgfVxufVxuXG46aG9zdCB7XG4gICAgOjotd2Via2l0LXNjcm9sbGJhciB7XG4gICAgICAgIHdpZHRoOiA2cHg7ICAgICAgICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgIH1cbiAgICBcbiAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZ3JheS01MDApO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4O1xuICAgIH1cbn1cblxuLmNkay1kcmFnLXByZXZpZXcge1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGJveC1zaGFkb3c6IDAgNXB4IDVweCAtM3B4IHJnYmEoMCwgMCwgMCwgMC4yKSxcbiAgICAgICAgMCA4cHggMTBweCAxcHggcmdiYSgwLCAwLCAwLCAwLjE0KSxcbiAgICAgICAgMCAzcHggMTRweCAycHggcmdiYSgwLCAwLCAwLCAwLjEyKTtcbn1cbiAgXG4uY2RrLWRyYWctcGxhY2Vob2xkZXIge1xuICAgIG9wYWNpdHk6IDAuMjU7XG59XG5cbi5jZGstZHJhZy1hbmltYXRpbmcge1xuICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAyNTBtcyBjdWJpYy1iZXppZXIoMCwgMCwgMC4yLCAxKTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["moveItemInArray","transferArrayItem","i0","KanbanListComponent","constructor","parent","kanbanService","ngOnInit","isMobileDevice","menuItems","label","items","separator","command","onCopy","list","listId","onDelete","toggleSidebar","sidebarVisible","id","deleteList","copyList","onCardClick","event","card","eventTarget","target","classList","contains","onCardSelect","insertCard","addCard","dropCard","previousContainer","container","data","previousIndex","currentIndex","focus","timeout","setTimeout","inputEl","nativeElement","insertHeight","element","style","minHeight","removeHeight","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\UsuarioPrincipal\\Downloads\\verona-ng-15.0.1\\src\\app\\demo\\components\\apps\\kanban\\kanban-list\\kanban-list.component.ts","C:\\Users\\UsuarioPrincipal\\Downloads\\verona-ng-15.0.1\\src\\app\\demo\\components\\apps\\kanban\\kanban-list\\kanban-list.component.html"],"sourcesContent":["import { Component, OnInit, Input, ElementRef, ViewChild } from '@angular/core';\nimport { MenuItem } from 'primeng/api';\nimport { KanbanCard, KanbanList } from 'src/app/demo/api/kanban';\nimport { KanbanAppComponent } from '../kanban.app.component';\nimport { KanbanService } from '../service/kanban.service';\nimport { CdkDragDrop, moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\n\n@Component({\n    selector: 'app-kanban-list',\n    templateUrl: './kanban-list.component.html',\n    styleUrls: ['./kanban-list.component.scss']\n})\nexport class KanbanListComponent implements OnInit {\n\n    @Input() list!: KanbanList;\n\n    @Input() listIds!: string[];\n\n    menuItems: MenuItem[] = [];\n\n    title: string = '';\n\n    timeout: any = null;\n\n    isMobileDevice: boolean = false;\n\n    @ViewChild('inputEl') inputEl!: ElementRef;\n\n    @ViewChild('listEl') listEl!: ElementRef;\n\n    constructor(public parent: KanbanAppComponent, private kanbanService: KanbanService) { }\n\n    ngOnInit(): void {\n        this.isMobileDevice = this.kanbanService.isMobileDevice();\n\n        this.menuItems = [\n            {\n                label: 'List actions', items: [\n                    { separator: true },\n                    { label: 'Copy list', command: () => this.onCopy(this.list) },\n                    { label: 'Remove list', command: () =>  {\n                        if (this.list.listId) {\n                            this.onDelete(this.list.listId)\n                        }\n                    }},\n                ]\n            }\n        ];\n    }\n\n    toggleSidebar() {\n        this.parent.sidebarVisible = true;\n    }\n\n    onDelete(id: string) {\n        this.kanbanService.deleteList(id);\n    }\n\n    onCopy(list: KanbanList) {\n        this.kanbanService.copyList(list);\n    }\n\n    onCardClick(event: Event, card: KanbanCard) {\n        const eventTarget = event.target as HTMLElement;\n        if (!(eventTarget.classList.contains('p-button-icon') || eventTarget.classList.contains('p-trigger'))) {\n            if (this.list.listId) {\n                this.kanbanService.onCardSelect(card, this.list.listId);\n            }\n            this.parent.sidebarVisible = true;\n        }\n    }\n\n    insertCard() {\n        if (this.list.listId) {\n            this.kanbanService.addCard(this.list.listId);\n        }\n    }\n\n    dropCard(event: CdkDragDrop<KanbanCard[]>): void {\n        if (event.previousContainer === event.container) {\n            moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\n        } else {\n            transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex);\n        }\n    }\n\n    focus() {\n        this.timeout = setTimeout(() => this.inputEl.nativeElement.focus(), 1);\n    }\n\n    insertHeight(event: any) {\n        event.container.element.nativeElement.style.minHeight = '10rem';\n    }\n\n    removeHeight(event: any) {\n        event.container.element.nativeElement.style.minHeight = '2rem';\n    }\n\n}\n","<div class=\"surface-card flex flex-column md:w-25rem border-1 surface-border overflow-hidden border-round\">\n    <div class=\"flex justify-content-between align-items-center w-full px-4 mt-4 h-3rem\">\n        <p-inplace #inplace [closable]=\"true\" closeIcon=\"pi pi-check\" styleClass=\"h-auto\" (onActivate)=\"focus()\">\n            <ng-template pTemplate=\"display\">\n                <span class=\"block text-900 font-semibold mt-4 pl-2 text-lg\"  pTooltip=\"Click to edit\" style=\"word-break: break-word;\" tooltipPosition=\"top\">{{list.title}}</span>\n            </ng-template>\n            <ng-template pTemplate=\"content\">\n                <input #inputEl type=\"text\" [value]=\"list.title\" [(ngModel)]=\"list.title\" pInputText class=\"w-10rem sm:w-15rem h-3rem text-900 text-lg\" (keydown.enter)=\"inplace.deactivate()\">\n            </ng-template>\n        </p-inplace>\n        <div>\n            <button pButton pRipple type=\"button\" icon=\"pi pi-ellipsis-h\" class=\"p-button-rounded p-button-text p-button-secondary\" (click)=\"menu.toggle($event)\"></button>\n            <p-menu #menu [model]=\"menuItems\" [popup]=\"true\"></p-menu>\n        </div>\n    </div>\n    <div [id]=\"list.listId\" class=\"flex flex-column gap-5 overflow-y-auto px-4 mt-4 scrollable kanban-list\" cdkDropList (cdkDropListDropped)=\"dropCard($event)\" (cdkDropListEntered)=\"insertHeight($event)\" (cdkDropListExited)=\"removeHeight($event)\" [cdkDropListData]=\"list.cards\" [cdkDropListConnectedTo]=\"listIds\" #listEl style=\"min-height:2rem\">\n        <app-kanban-card *ngFor=\"let card of list.cards\" [card]=\"card\" [listId]=\"list.listId\" (click)=\"onCardClick($event, card)\" cdkDrag cdkDragHandle [cdkDragDisabled]=\"isMobileDevice\"></app-kanban-card>\n    </div>\n    <div class=\"px-4 mb-3 w-full mt-4 flex\">\n        <button pButton pRipple label=\"New Card\" icon=\"pi pi-plus font-semibold\" class=\"py-3 justify-content-center font-semibold w-full border-round\" (click)=\"insertCard()\"></button>\n    </div>\n</div> "]},"metadata":{},"sourceType":"module","externalDependencies":[]}